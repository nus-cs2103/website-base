<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>CS2103/T Website - Text Book Chapter [Printable] : Software Design Patterns</title>
    <link rel="stylesheet" href="..\..\markbind\css\bootstrap.min.css">
    <link rel="stylesheet" href="..\..\markbind\css\bootstrap-vue.min.css">
    <link rel="stylesheet" href="..\..\markbind\css\font-awesome.min.css" >
    <link rel="stylesheet" href="..\..\markbind\css\bootstrap-glyphicons.min.css" >
    <link rel="stylesheet" href="..\..\markbind\css\github.min.css">
    <link rel="stylesheet" href="..\..\markbind\css\markbind.css">
    <link rel="stylesheet" href="..\..\markbind\css\site-nav.css">
    <link rel="icon" href="/website-base/favicon.ico">
</head>
<body>
<div id="app" class="container-fluid">
    <link rel="stylesheet" href="/website-base/book/css/textbook.css">
<div class="website-content">
  <div id="title">
    <div>
      <h1 id="software-design-patterns">Software Design Patterns</h1>
    </div>
  </div>
  <div>
    <p><small><span class="dimmed"><span class="glyphicon glyphicon-print" aria-hidden="true"></span> This is a <strong>printer-friendly</strong> version. It omits exercises, optional topics (i.e., four-star topics), and other extra content such as learning outcomes.</span></small></p>
  </div>
  <div>
    <h2 id="introduction">Introduction</h2>
  </div>
  <div class="indented-less">
    <div class="indented-less">
      <h4 id="what">What <span class="badge badge-light"><small><small><font color="DarkOrange"><span class="glyphicon glyphicon-star" aria-hidden="true"></span><span class="glyphicon glyphicon-star" aria-hidden="true"></span></font><span class="glyphicon glyphicon-star-empty"
          aria-hidden="true"></span><span class="glyphicon glyphicon-star-empty" aria-hidden="true"></span></small>
        </small>
        </span>
      </h4>
      <div class="indented-less">
        <div>
          <tip-box type="definition">
            <div>
              <p><strong>Design Pattern</strong> : An <em>elegant reusable solution</em> to a <em>commonly recurring problem</em> within a <em>given context</em> in software design.</p>
            </div>
          </tip-box>
          <p>In software development, there are certain problems that recur in a certain context.</p>
          <tip-box>
            <p><span class="fas fa-cube"></span> Some examples of recurring design problems:</p>
            <table class="markbind-table table table-bordered table-striped">
              <thead>
                <tr>
                  <th>Design Context</th>
                  <th>Recurring Problem</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>Assembling a system that makes use of other existing systems implemented using different technologies</td>
                  <td>What is the best architecture?</td>
                </tr>
                <tr>
                  <td>UI needs to be updated when the data in application backend changes</td>
                  <td>How to initiate an update to the UI when data changes without coupling the backend to the UI?</td>
                </tr>
              </tbody>
            </table>
          </tip-box>
          <p>After repeated attempts at solving such problems, better solutions are discovered and refined over time. These solutions are known as design patterns, **a term popularized by the seminal book <em>Design Patterns: Elements of Reusable Object-Oriented Software</em>            by the so-called <a href="https://en.wikipedia.org/wiki/Design_Patterns">&quot;Gang of Four&quot;** (GoF) book written by Eric Gamma, Richard Helm, Ralph Johnson,and John Vlissides</a></p>
        </div>
      </div>
    </div>
    <div class="indented-less">
      <h4 id="format">Format <span class="badge badge-light"><small><small><font color="DarkOrange"><span class="glyphicon glyphicon-star" aria-hidden="true"></span><span class="glyphicon glyphicon-star" aria-hidden="true"></span></font><span class="glyphicon glyphicon-star-empty"
          aria-hidden="true"></span><span class="glyphicon glyphicon-star-empty" aria-hidden="true"></span></small>
        </small>
        </span>
      </h4>
      <div class="indented-less">
        <div>
          <p>The common format to describe a pattern consists of the following components:</p>
          <ul>
            <li><strong>Context</strong>: The situation or scenario where the design problem is encountered.</li>
            <li><strong>Problem</strong>: The main difficulty to be resolved.</li>
            <li><strong>Solution</strong>: The core of the solution. It is important to note that the solution presented only includes the most general details, which may need further refinement for a specific context.</li>
            <li><strong>Anti-patterns</strong> (optional): Commonly used solutions, which are usually incorrect and/or inferior to the Design Pattern.</li>
            <li><strong>Consequences</strong> (optional): Identifying the pros and cons of applying the pattern.</li>
            <li><strong>Other useful information</strong> (optional): Code examples, known uses, other related patterns, etc.</li>
          </ul>
        </div>
      </div>
    </div>
  </div>
  <div>
    <h2 id="singleton-pattern">Singleton Pattern</h2>
  </div>
  <div class="indented-less">
    <div class="indented-less">
      <h4 id="what-2">What <span class="badge badge-light"><small><small><font color="DarkOrange"><span class="glyphicon glyphicon-star" aria-hidden="true"></span><span class="glyphicon glyphicon-star" aria-hidden="true"></span></font><span class="glyphicon glyphicon-star-empty"
          aria-hidden="true"></span><span class="glyphicon glyphicon-star-empty" aria-hidden="true"></span></small>
        </small>
        </span>
      </h4>
      <div class="indented-less">
        <div>
          <p><strong>Context</strong></p>
          <p>A certain classes should have no more than just one instance (e.g. the main controller class of the system). These single instances are commonly known as <em>singletons</em>.</p>
          <p><strong>Problem</strong></p>
          <p>A normal class can be instantiated multiple times by invoking the constructor.</p>
          <p><strong>Solution</strong></p>
          <p>Make the constructor of the singleton class <code>private</code>, <span class="dimmed"> because a <code>public</code> constructor will allow others to instantiate the class at will</span>. Provide a <code>public</code> class-level method to
            access the <em>single instance</em>.</p>
          <tip-box>
            <p>Example:</p>
            <img src="/website-base/book/designPatterns/singleton/what/images/singleton.png" height="130">
            <p></p>
          </tip-box>
        </div>
      </div>
    </div>
    <div class="indented-less">
      <h4 id="implementation">Implementation <span class="badge badge-light"><small><small><font color="DarkOrange"><span class="glyphicon glyphicon-star" aria-hidden="true"></span><span class="glyphicon glyphicon-star" aria-hidden="true"></span></font><span class="glyphicon glyphicon-star-empty"
          aria-hidden="true"></span><span class="glyphicon glyphicon-star-empty" aria-hidden="true"></span></small>
        </small>
        </span>
      </h4>
      <div class="indented-less">
        <div>
          <p>Here is the typical implementation of how the Singleton pattern is applied to a class:</p>
          <pre><code class="hljs java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Logic</span> </span>{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Logic theOne = <span class="hljs-keyword">null</span>;

    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-title">Logic</span><span class="hljs-params">()</span> </span>{
        ...
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Logic <span class="hljs-title">getInstance</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">if</span> (theOne == <span class="hljs-keyword">null</span>) {
            theOne = <span class="hljs-keyword">new</span> Logic();
        }
        <span class="hljs-keyword">return</span> theOne;
    }
}
</code></pre>
          <p>Notes:</p>
          <ul>
            <li>The constructor is <code>private</code>, which prevents instantiation from outside the class.</li>
            <li>The single instance of the singleton class is maintained by a <code>private</code> class-level variable.</li>
            <li>Access to this object is provided by a <code>public</code> class-level operation <code>getInstance()</code> which instantiates a single copy of the singleton class when it is executed for the first time. Subsequent calls to this operation
              return the single instance of the class.</li>
          </ul>
          <p>If <code>Logic</code> was not a Singleton class, an object is created like this:</p>
          <pre><code class="hljs java">Logic m = <span class="hljs-keyword">new</span> Logic();
</code></pre>
          <p>But now, the <code>Logic</code> object needs to be accessed like this:</p>
          <pre><code class="hljs java">Logic m = Logic.getInstance();
</code></pre>
        </div>
      </div>
    </div>
    <div class="indented-less">
      <h4 id="evaluation">Evaluation <span class="badge badge-light"><small><small><font color="DodgerBlue"><span class="glyphicon glyphicon-star" aria-hidden="true"></span><span class="glyphicon glyphicon-star" aria-hidden="true"></span><span class="glyphicon glyphicon-star"
          aria-hidden="true"></span></font><span class="glyphicon glyphicon-star-empty" aria-hidden="true"></span></small>
        </small>
        </span>
      </h4>
      <div class="indented-less">
        <div>
          <p><strong>Pros:</strong></p>
          <ul>
            <li>easy to apply</li>
            <li>effective in achieving its goal with minimal extra work</li>
            <li>provides an easy way to access the singleton object from anywhere in the code base</li>
          </ul>
          <p><strong>Cons:</strong></p>
          <ul>
            <li>The singleton object acts like a global variable that increases coupling across the code base.</li>
            <li>In testing, it is difficult to replace Singleton objects with stubs (static methods cannot be overridden)</li>
            <li>In testing, singleton objects carry data from one test to another even when we want each test to be independent of the others.</li>
          </ul>
          <p>Given there are some significant cons, it is recommended that you apply the Singleton pattern when, in addition to requiring only one instance of a class, there is a risk of creating multiple objects by mistake, and creating such multiple objects
            has real negative consequences.</p>
        </div>
      </div>
    </div>
  </div>
  <div>
    <h2 id="abstraction-occurrence-pattern">Abstraction Occurrence Pattern</h2>
  </div>
  <div class="indented-less"></div>
  <div>
    <h2 id="facade-pattern">Facade Pattern</h2>
  </div>
  <div class="indented-less">
    <div class="indented-less">
      <h4 id="what-3">What <span class="badge badge-light"><small><small><font color="DodgerBlue"><span class="glyphicon glyphicon-star" aria-hidden="true"></span><span class="glyphicon glyphicon-star" aria-hidden="true"></span><span class="glyphicon glyphicon-star"
          aria-hidden="true"></span></font><span class="glyphicon glyphicon-star-empty" aria-hidden="true"></span></small>
        </small>
        </span>
      </h4>
      <div class="indented-less">
        <div>
          <p><strong>Context</strong></p>
          <p>Components need to access functionality deep inside other components.</p>
          <tip-box>
            <p><span class="fas fa-cube"></span> The <code>UI</code> component of a <code>Library</code> system might want to access functionality of the <code>Book</code> class contained inside the <code>Logic</code> component.</p>
            <img src="/website-base/book/designPatterns/facade/what/images/textBook.png" height="120">
            <p></p>
          </tip-box>
          <p><strong>Problem</strong></p>
          <p>Access to the component should be allowed without exposing its internal details. <span class="dimmed"> e.g.  the <code>UI</code> component should access the functionality of the <code>Logic</code> component without knowing that it contained a <code>Book</code> class within it.</span></p>
          <p><strong>Solution</strong></p>
          <p>Include a
            <tooltip content="a French word that means 'front of a building'">Façade</tooltip> class that sits between the component internals and users of the component such that all access to the component happens through the Facade class.</p>
          <tip-box>
            <p><span class="fas fa-cube"></span> The following class diagram applies the Façade pattern to the <code>Library System</code> example. The <code>LibraryLogic</code> class is the Facade class.</p>
            <img src="/website-base/book/designPatterns/facade/what/images/textLibraryBook.png" height="120">
            <p></p>
          </tip-box>
        </div>
      </div>
    </div>
  </div>
  <div>
    <h2 id="command-pattern">Command Pattern</h2>
  </div>
  <div class="indented-less">
    <div class="indented-less">
      <h4 id="what-4">What <span class="badge badge-light"><small><small><font color="DodgerBlue"><span class="glyphicon glyphicon-star" aria-hidden="true"></span><span class="glyphicon glyphicon-star" aria-hidden="true"></span><span class="glyphicon glyphicon-star"
          aria-hidden="true"></span></font><span class="glyphicon glyphicon-star-empty" aria-hidden="true"></span></small>
        </small>
        </span>
      </h4>
      <div class="indented-less">
        <div>
          <p><strong>Context</strong></p>
          <p>A system is required to execute a number of commands, each doing a different task. For example, a system might have to support <code>Sort</code>, <code>List</code>, <code>Reset</code> commands.</p>
          <p><strong>Problem</strong></p>
          <p>It is preferable that some part of the code executes these commands without having to know each command type. <span class="dimmed"> e.g., there can be a <code>CommandQueue</code> object that is responsible for queuing commands and executing them without knowledge of what each command does.</span></p>
          <p><strong>Solution</strong></p>
          <p>The essential element of this pattern is to have a general <code>&lt;&lt; Command &gt;&gt;</code> object that can be passed around, stored, executed, etc without knowing the type of command (i.e. via polymorphism).</p>
          <p>Let us examine an example application of the pattern first:</p>
          <tip-box>
            <p><span class="fas fa-cube"></span> In the example solution below, the <code>CommandCreator</code> creates <code>List</code>, <code>Sort</code>, and <code>Reset Command</code> objects and adds them to the <code>CommandQueue</code> object. The
              <code>CommandQueue</code> object treats them all as <code>Command</code> objects and performs the execute/undo operation on each of them without knowledge of the specific <code>Command</code> type. When executed, each <code>Command</code>              object will access the <code>DataStore</code> object to carry out its task. The <code>Command</code> class can also be an abstract class or an interface.</p>
            <img src="/website-base/book/designPatterns/command/what/images/commandCreator.png" height="150">
            <p></p>
          </tip-box>
          <p>The general form of the solution is as follows.</p>
          <img src="/website-base/book/designPatterns/command/what/images/clientInvoker.png" height="200">
          <p></p>
          <p>The <code>&lt;&lt; Client &gt;&gt;</code> creates a <code>&lt;&lt; ConcreteCommand &gt;&gt;</code> object, and passes it to the <code>&lt;&lt; Invoker &gt;&gt;</code>. The <code>&lt;&lt; Invoker &gt;&gt;</code> object treats all commands as
            a general <code>&lt;&lt; Command &gt;&gt;</code> type. <code>&lt;&lt; Invoker &gt;&gt;</code> issues a request by calling <code>execute()</code> on the command. If a command is undoable, <code>&lt;&lt; ConcreteCommand &gt;&gt;</code> will
            store the state for undoing the command prior to invoking <code>execute()</code>. In addition, the <code>&lt;&lt; ConcreteCommand &gt;&gt;</code> object may have to be linked to any <code>&lt;&lt; Receiver &gt;&gt;</code> of the command (
            <tooltip
              content="the object the command will operate on, in case different commands operate on different objects">?</tooltip>) before it is passed to the <code>&lt;&lt; Invoker &gt;&gt;</code>. Note that an application of the command pattern does not have to follow the structure given above.</p>
        </div>
      </div>
    </div>
  </div>
  <div>
    <h2 id="model-view-controller-mvc-pattern">Model View Controller (MVC) Pattern</h2>
  </div>
  <div class="indented-less">
    <div class="indented-less">
      <h4 id="what-5">What <span class="badge badge-light"><small><small><font color="DarkOrange"><span class="glyphicon glyphicon-star" aria-hidden="true"></span><span class="glyphicon glyphicon-star" aria-hidden="true"></span></font><span class="glyphicon glyphicon-star-empty"
          aria-hidden="true"></span><span class="glyphicon glyphicon-star-empty" aria-hidden="true"></span></small>
        </small>
        </span>
      </h4>
      <div class="indented-less">
        <div>
          <p><strong>Context</strong></p>
          <p>Most applications support storage/retrieval of information, displaying of information to the user (often via multiple UIs having different formats), and changing stored information based on external inputs.</p>
          <p><strong>Problem</strong></p>
          <p>To reduce coupling resulting from the interlinked nature of the features described above.</p>
          <p><strong>Solution</strong></p>
          <p>To decouple data, presentation, and control logic of an application by separating them into three different components: Model, View and Controller.</p>
          <ul>
            <li><em>View</em>: Displays data, interacts with the user, and pulls data from the model if necessary.</li>
            <li><em>Controller</em>: Detects UI events such as mouse clicks, button pushes and takes follow up action. Updates/changes the model/view when necessary.</li>
            <li><em>Model</em>: Stores and maintains data. Updates views if necessary.</li>
          </ul>
          <p>The relationship between the components can be observed in the diagram below. Typically, the UI is the combination of view and controller.</p>
          <img src="/website-base/book/designPatterns/modelViewController/what/images/classDiagram.png" width="400">
          <p></p>
          <tip-box>
            <p><span class="fas fa-cube"></span> Given below is a concrete example of MVC applied to a student management system. In this scenario, the user is retrieving data of one student.</p>
            <img src="/website-base/book/designPatterns/modelViewController/what/images/sequenceDiagram.png" width="500">
            <p></p>
            <p>In the diagram above, when the user clicks on a button using the UI, the ‘click’ event is caught and handled by the <code>UiController</code>.</p>
          </tip-box>
          <p>Note that in a simple UI where there’s only one view, Controller and View can be combined as one class.</p>
          <p>There are many variations of the MVC model used in different domains. For example, the one used in a desktop GUI could be different from the one used in a Web application.</p>
        </div>
      </div>
    </div>
  </div>
  <div>
    <h2 id="observer-pattern">Observer Pattern</h2>
  </div>
  <div class="indented-less">
    <div class="indented-less">
      <h4 id="what-6">What <span class="badge badge-light"><small><small><font color="DodgerBlue"><span class="glyphicon glyphicon-star" aria-hidden="true"></span><span class="glyphicon glyphicon-star" aria-hidden="true"></span><span class="glyphicon glyphicon-star"
          aria-hidden="true"></span></font><span class="glyphicon glyphicon-star-empty" aria-hidden="true"></span></small>
        </small>
        </span>
      </h4>
      <div class="indented-less">
        <div>
          <tip-box>
            <p><span class="fas fa-cube"></span> Here is a scenario from the a student management system where the user is adding a new student to the system.</p>
            <img src="/website-base/book/designPatterns/observer/what/images/sequenceDiagram.png" height="330">
            <p></p>
            <p>Now, assume the system has two additional views used in parallel by different users:</p>
            <ul>
              <li><code>StudentListUi</code>: that accesses a list of students and</li>
              <li><code>StudentStatsUi</code>: that generates statistics of current students.</li>
            </ul>
            <p>When a student is added to the database using <code>NewStudentUi</code> shown above, both <code>StudentListUi</code> and <code>StudentStatsUi</code> should get updated automatically, as shown below.</p>
            <img src="/website-base/book/designPatterns/observer/what/images/studentListUI.png" height="180">
            <p></p>
            <p>However, the <code>StudentList</code> object has no knowledge about <code>StudentListUi</code> and <code>StudentStatsUi</code> (note the direction of the navigability) and has no way to inform those objects. This is an example of the type
              of problem addressed by the Observer pattern.</p>
          </tip-box>
          <p><strong>Context</strong></p>
          <p>An object (possibly, more than one) is interested to get notified when a change happens to another object. That is, some objects want to ‘observe’ another object.</p>
          <p><strong>Problem</strong></p>
          <p>The ‘observed’ object does not want to be coupled to objects that are ‘observing’ it.</p>
          <p><strong>Solution</strong></p>
          <p>Force the communication through an interface known to both parties.</p>
          <img src="/website-base/book/designPatterns/observer/what/images/studentListObserver.png" height="160">
          <p></p>
          <tip-box>
            <p><span class="fas fa-cube"></span>Here is the Observer pattern applied to the student management system.</p>
            <p>During initialization of the system,</p>
            <ol>
              <li>First, create the relevant objects.</li>
            </ol>
            <pre><code class="hljs java">StudentList studentList = <span class="hljs-keyword">new</span> StudentList();
StudentListUi listUi = <span class="hljs-keyword">new</span> StudentListUi();
StudentStatusUi statusUi = <span class="hljs-keyword">new</span> StudentStatsUi();
</code></pre>
            <ol start="2">
              <li>Next, the two UIs indicate to the <code>StudentList</code> that they are interested in being updated whenever <code>StudentList</code> changes. This is also known as ‘subscribing for updates’.</li>
            </ol>
            <pre><code class="hljs java">studentList.addUi(listUi);
studentList.addUi(statusUi);
</code></pre>
            <p>Within the <code>addUi</code> operation of <code>StudentList</code>, all Observer objects subscribers are added to an internal data structure called <code>observerList</code>.</p>
            <pre><code class="hljs java"><span class="hljs-comment">//StudentList class</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">addUi</span><span class="hljs-params">(Observer o)</span> </span>{
    observerList.add(o);
}
</code></pre>
            <p>As such, whenever the data in <code>StudentList</code> changes (e.g. when a new student is added to the <code>StudentList</code>), all interested observers are updated by calling the <code>notifyUIs</code> operation.</p>
            <pre><code class="hljs java"><span class="hljs-comment">//StudentList class</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">notifyUIs</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">for</span>(Observer o: observerList) <span class="hljs-comment">//for each observer in the list</span>
        o.update();
}
</code></pre>
            <p>UIs can then pull data from the <code>StudentList</code> whenever the <code>update</code> operation is called.</p>
            <pre><code class="hljs java"><span class="hljs-comment">//StudentListUI class</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">update</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">//refresh UI by pulling data from StudentList</span>
}
</code></pre>
            <p>Note that <code>StudentList</code> is unaware of the exact nature of the two UIs but still manages to communicate with them via an intermediary.</p>
          </tip-box>
          <p>Here is the generic description of the observer pattern:</p>
          <img src="/website-base/book/designPatterns/observer/what/images/observableInterfaceDiagram.png" height="100">
          <p></p>
          <ul>
            <li><code>&lt;&lt; Observer &gt;&gt;</code> is an interface: any class that implements it can observe an <code>&lt;&lt; Observable &gt;&gt;</code>. Any number of <code>&lt;&lt; Observer &gt;&gt;</code> objects can observe (i.e. listen to changes
              of) the <code>&lt;&lt; Observable &gt;&gt;</code> object.</li>
            <li>The <code>&lt;&lt; Observable &gt;&gt;</code> maintains a list of <code>&lt;&lt; Observer &gt;&gt;</code> objects. <code>addObserver(Observer)</code> operation adds a new <code>&lt;&lt; Observer &gt;&gt;</code> to the list of <code>&lt;&lt; Observer &gt;&gt;s</code>.</li>
            <li>Whenever there is a change in the <code>&lt;&lt; Observable &gt;&gt;</code>, the <code>notifyObservers()</code> operation is called that will call the <code>update()</code> operation of all <code>&lt;&lt; Observer &gt;&gt;s</code> in the list.</li>
          </ul>
          <p>In a GUI application, how is the Controller notified when the “save” button is clicked? UI frameworks such as JavaFX has inbuilt support for the Observer pattern.</p>
        </div>
      </div>
    </div>
  </div>
  <div>
    <h2 id="more">More</h2>
  </div>
  <div class="indented-less"></div>
</div>
<div id="flex-div"></div>
<footer>
  <div class="text-center">
    <small>This site was built with <a href="https://markbind.github.io/markbind/">MarkBind 1.9.0</a> at Tue, 17 Jul 2018 15:35:40 GMT</small></div>
</footer>
</div>
</body>
<script src="..\..\markbind\js\vue.min.js"></script>
<script src="..\..\markbind\js\vue-strap.min.js"></script>
<script src="..\..\markbind\js\polyfill.min.js"></script>
<script src="..\..\markbind\js\bootstrap-vue.min.js"></script>
<script>
    const baseUrl = '/website-base'
</script>
<script src="..\..\markbind\js\setup.js"></script>
</html>
